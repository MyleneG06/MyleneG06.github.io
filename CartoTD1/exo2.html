<!DOCTYPE html>
<html>
<head>
	<title>Mylene TD1 exo2</title>
	<meta charset="utf-8"/>
</head>
<body>
	<h3>TD1</h3>
	<h1>exo2</h1><br/>
	<br/>
	<p id="position">position (lon, lat) : </p><br/>
	<p id="precision">précision de mesure : </p><br/>
	<p id="vitesse">vitesse : </p><br/>
	<p id="timestamp">time stamp : </p><br/>
	
</body>

<script>
	
	function success(pos) {
		var crd = pos.coords;

		let position = document.getElementById('position');		
		position.innerHTML = "Votre position actuelle est : " + crd.longitude + " (longitude) / " + crd.latitude + " (latitude)";

		let precision = document.getElementById("precision");
		precision.innerHTML = "La précision est de "+crd.accuracy+" mètres.";

		let vitesse = document.getElementById("vitesse");
		if (!crd.speed){crd.speed=0;} //à chercher !
		vitesse.innerHTML = "La vitesse est de "+crd.speed+" m/s.";

		let timestamp = document.getElementById("timestamp");
		var date = new Date(pos.timestamp); 
		timestamp.innerHTML = "Le timestamp est "+date+".";

		// if (target.latitude === crd.latitude && target.longitude === crd.longitude) {
		// 	console.log('Bravo, vous avez atteint la cible');
		// 	navigator.geolocation.clearWatch(id);
		// }

		// target = {
		// 	latitude : 0,
		// 	longitude: 0
		// };
	}

	function error(err) {
		console.warn(`ERREUR (${err.code}): ${err.message}`);
	}

	navigator.geolocation.getCurrentPosition(success, error); // si à un instant t
	//navigator.geolocation.watchPosition(success,error); // si position à surveiller
	
</script>
</html>